# О приложении

## Используемые технологии

**LlamaIndex** - высокоуровневый фреймворк, который берет на себя следующие задачи:

1. Общение с языковой моделью
2. Инициализация и общение с векторной БД для RAG
3. Разбиение загруженного документа на чанки
4. Создание эмбеддингов и загрузка чанков в векторную БД

Ссылка: https://www.llamaindex.ai

**streamlit** - фреймворк для быстрого создания приложений для работы с данными

Он берет на себя следующие задачи:

1. Веб-интерфейс чата
2. Админ-панель с вкладками
3. Загрузка файлов
4. Формы ввода
5. Удобное отображение данных

Разбор документов и веб-страниц происходит через **PyPDF**, **beautifulsoup** и т.д.

Ссылка: https://streamlit.io

# Запуск приложения

## Настройка переменных окружения

Необходимо вручную настроить секреты в `enrivonment.sh`.

После можно запустить:

```sh
source environment.sh
```

Создастся `.env` файл, который будет использоваться сервисом.

## Инициализация базы данных

### Локальная БД

1. Необходимо локально установить расширение [pgvector](https://github.com/pgvector/pgvector#installation)
2. Создать базу данных с именем из переменной окружения `DB_NAME`
3. Создать пользователя с `DB_LOGIN` и `DB_PASSWORD`, которому дать привелегии суперпользователя
4. Добавить расширение `pgvector` в базе данных `DB_NAME`:

```sql
CREATE EXTENSION pgvector
```

Инициализацию таблицы документов пока сделает приложение.

Инициализация таблицы с чанками и работа с ней полностью на **LlamaIndex**.

### Docker Compose

В целях удобства был добавлен контейнер, автоматически выполняющий все четыре пункта.

Код контейнера находится в `docker-compose.yml`.

Запуск:

```sh
docker-compose up --build
```

## Запуск сервиса

```sh
# Настройка виртуального окружения
python -m venv .venv
source .venv/bin/activate
python -m ensurepip

# Установка зависимостей
pip install -r requirements.txt

# Запуск приложения
streamlit run app.py
```
